#!/usr/bin/env python3
'''
Basic python3 function that sends an update to the pwnboard
'''
import requests
import json
import sys


def sendUpdate(ip, name="python"):
    host = "{{ server }}/generic"
    headers = {'Content-Type': 'application/json',
               'Connection': 'Close'}
    data = json.dumps({'ip': ip, 'type': name})
    try:
        req = requests.post(host, data=data, headers=headers)
        return True
    except Exception as E:
        return False

if __name__ == '__main__':
    if len(sys.argv) > 1:
        ip = sys.argv[1]
    else:
        print("USAGE: {} <ip> [name]".format(sys.argv[0]))
    if len(sys.argv) > 2:
        name = sys.argv[2]
    else:
        name = "python"
    sendUpdate(ip, name)
